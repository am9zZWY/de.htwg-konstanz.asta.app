import{_ as j,d as w,T as N,k as $,f as S,u as B,l as h,g as V,m as G,c as i,e as n,t as b,a as P,w as v,F as d,n as F,p as C,r as T,o as c,q as y,i as q,b as E}from"./index.55695798.js";const A=w({name:"View_Grades",components:{Tile:N,TileGroup:$},setup(){const e=S(-1),r=S([]),g=S(0),k=B(),_=async()=>{const t=await F("noten",k);r.value=t.content,g.value=t.status},m=t=>t.replace(/(\\n|\\t)/g,"").trim(),p=t=>t.reduce((a,l)=>parseInt(l.ects)+a,0),f=()=>e.value*=-1,s=h(()=>r.value.reduce((t,a)=>(a.semester in t||(t[a.semester]=[]),t[a.semester].push(Object.assign({},...Object.entries(a).map(([l,u])=>({[m(l)]:m(u)})))),t),{})),o=h(()=>Object.keys(s.value).sort((t,a)=>{const l=t.match(/(\d+\/\d+)|(\d+)/),u=a.match(/(\d+\/\d+)|(\d+)/);return!C(l)&&!C(u)?e.value===1?l[0].localeCompare(u[0]):u[0].localeCompare(l[0]):1}));V(_),G(_);const O=h(()=>p(r.value));return{status:g,semesters:o,gradePerSemester:s,allECTS:O,grades:r,changeOrder:f,calcECTS:p,cleanString:m}}}),D={class:"big-tile-title"},I=["aria-describedby"],L=n("tr",null,[n("th",{id:"subject",class:"subject"},"Fach"),n("th",{id:"status",class:"status"},"Status/Note")],-1),M={class:"subject"},U={class:"status"};function z(e,r,g,k,_,m){const p=T("tile"),f=T("tile-group");return c(),i(d,null,[n("div",D,b(e.allECTS)+" ECTS",1),n("div",null,[n("button",{class:"button dark-bg",role:"button",onClick:r[0]||(r[0]=(...s)=>e.changeOrder&&e.changeOrder(...s))}," Sortierung \xE4ndern ")]),P(f,{status:e.status,"require-login":"","tile-title":"Noten"},{default:v(()=>[(c(!0),i(d,null,y(e.semesters,s=>(c(),q(p,{key:s,"tile-title":s,"tile-subtitle":`${e.calcECTS(e.gradePerSemester[s])} ECTS-Punkte`},{default:v(()=>[n("table",{"aria-describedby":`Tabelle mit Noten des ${s}`,class:"grades"},[L,(c(!0),i(d,null,y(e.gradePerSemester[s],o=>(c(),i("tr",{key:o.number,class:"grade"},[n("td",M,b(o.name),1),n("td",U,[e.cleanString(o.grade)===""?(c(),i(d,{key:0},[E(b(e.cleanString(o.status)),1)],64)):(c(),i(d,{key:1},[E(b(e.cleanString(o.grade)),1)],64))])]))),128))],8,I)]),_:2},1032,["tile-title","tile-subtitle"]))),128))]),_:1},8,["status"])],64)}var J=j(A,[["render",z]]);export{J as default};
